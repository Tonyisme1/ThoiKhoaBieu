<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Smart University Timetable</title>
    <link rel="stylesheet" href="./css/variables.css" />
    <link rel="stylesheet" href="./css/main.css" />
    <link rel="stylesheet" href="./css/layout.css" />
    <link rel="stylesheet" href="./css/components.css" />
    <link rel="stylesheet" href="./css/notes.css" />
  </head>
  <body>
    <header class="app-header">
      <div class="header-top">
        <div class="header-logo">
          <h1>Th·ªùi Kh√≥a Bi·ªÉu</h1>
        </div>
        <button
          id="btn-theme-toggle"
          class="btn-icon"
          title="ƒê·ªïi giao di·ªán"
          aria-label="Toggle theme"
        >
          <svg class="icon icon-lg" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="5"/>
            <line x1="12" y1="1" x2="12" y2="3"/>
            <line x1="12" y1="21" x2="12" y2="23"/>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
            <line x1="1" y1="12" x2="3" y2="12"/>
            <line x1="21" y1="12" x2="23" y2="12"/>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
          </svg>
        </button>
      </div>

      <!-- Tab Navigation -->
      <nav class="tab-navigation">
        <button class="tab-btn active" data-tab="dashboard">
          Trang Ch·ªß
        </button>
        <button class="tab-btn" data-tab="timetable">
          Th·ªùi Kh√≥a Bi·ªÉu
        </button>
        <button class="tab-btn" data-tab="assignments">
          B√†i T·∫≠p
        </button>
        <button class="tab-btn" data-tab="exams">
          L·ªãch Thi
        </button>
        <button class="tab-btn" data-tab="attendance">
          ƒêi·ªÉm Danh
        </button>
        <button class="tab-btn" data-tab="courses">
          Danh S√°ch M√¥n
        </button>
        <button class="tab-btn" data-tab="notes">
          Ghi Ch√∫
        </button>
        <button class="tab-btn" data-tab="settings">
          C√†i ƒê·∫∑t
        </button>
      </nav>

      <div id="holiday-banner" class="holiday-note"></div>
    </header>

    <main>
      <!-- Tab: Dashboard -->
      <div class="tab-content active" id="tab-dashboard">
        <!-- Week Navigation -->
        <nav class="week-navigation dashboard-week-nav">
          <button id="btn-prev-week" class="nav-btn" aria-label="Tu·∫ßn tr∆∞·ªõc">
            <svg class="icon" viewBox="0 0 24 24">
              <polyline points="15 18 9 12 15 6"/>
            </svg>
          </button>
          <select id="week-dropdown-header" class="week-select"></select>
          <button id="btn-next-week" class="nav-btn" aria-label="Tu·∫ßn sau">
            <svg class="icon" viewBox="0 0 24 24">
              <polyline points="9 18 15 12 9 6"/>
            </svg>
          </button>
        </nav>

        <!-- Dashboard & Analytics -->
      <section class="dashboard-section">
        <div class="dashboard-header">
          <h3>Dashboard & Analytics</h3>
          <div style="display: flex; gap: 12px; align-items: center;">
            <p class="dashboard-subtitle">Th·ªëng k√™ t·ªïng quan</p>
            <select id="dashboard-view-select" class="filter-select" style="padding: 6px 12px; font-size: 0.85rem;">
              <option value="semester">To√†n h·ªçc k·ª≥</option>
              <option value="week" selected>Tu·∫ßn hi·ªán t·∫°i</option>
            </select>
          </div>
        </div>
        
        <div class="dashboard-cards">
          <div class="dash-card" id="card-total-courses">
            <div class="dash-label" id="dash-label-courses">M√¥n trong tu·∫ßn</div>
            <div class="dash-value" id="stat-courses">0</div>
            <div class="dash-meta" id="dash-meta-courses">T·∫•t c·∫£ m√¥n c√≥ l·ªãch tu·∫ßn n√†y</div>
          </div>
          <div class="dash-card" id="card-total-hours">
            <div class="dash-label">T·ªïng ti·∫øt</div>
            <div class="dash-value" id="stat-periods">0</div>
            <div class="dash-meta" id="stat-hours">‚âà 0 gi·ªù</div>
          </div>
          <div class="dash-card" id="card-favorites">
            <div class="dash-label">Y√™u th√≠ch</div>
            <div class="dash-value" id="stat-favorites">0</div>
            <div class="dash-meta">M√¥n ƒë√£ ƒë√°nh d·∫•u</div>
          </div>
          <div class="dash-card" id="card-next-class">
            <div class="dash-label">L·ªõp s·∫Øp t·ªõi</div>
            <div class="dash-value" id="stat-next-title">‚Äî</div>
            <div class="dash-meta" id="stat-next-meta">Ch∆∞a c√≥ l·ªãch</div>
          </div>
          <div class="dash-card" id="card-attendance">
            <div class="dash-label">ƒêi·ªÉm danh</div>
            <div class="dash-value" id="stat-attendance">0/0</div>
            <div class="dash-meta">ƒê√£ ƒëi / T·ªïng bu·ªïi</div>
          </div>
        </div>

        <div class="dashboard-grid">
          <div class="chart-card">
            <div class="chart-header">
              <h4 id="chart-title-load">Bi·ªÉu ƒë·ªì t·∫£i tu·∫ßn</h4>
              <span class="chart-hint" id="chart-hint-load">S·ªë ti·∫øt theo ng√†y</span>
            </div>
            <div id="weekly-load-chart" class="bar-chart"></div>
          </div>
          <div class="chart-card">
            <div class="chart-header">
              <h4>Ng√†y ngh·ªâ</h4>
              <span class="chart-hint">Tu·∫ßn c√≥ ngh·ªâ</span>
            </div>
            <ul id="holiday-mini-list" class="holiday-mini-list"></ul>
          </div>
        </div>
      </section>
      </div>

      <!-- Tab: Timetable -->
      <div class="tab-content" id="tab-timetable">
        <!-- Week Navigation -->
        <nav class="week-navigation timetable-week-nav">
          <button id="btn-prev-week-2" class="nav-btn" aria-label="Tu·∫ßn tr∆∞·ªõc">
            <svg class="icon" viewBox="0 0 24 24">
              <polyline points="15 18 9 12 15 6"/>
            </svg>
          </button>
          <select id="week-dropdown-2" class="week-select"></select>
          <button id="btn-next-week-2" class="nav-btn" aria-label="Tu·∫ßn sau">
            <svg class="icon" viewBox="0 0 24 24">
              <polyline points="9 18 15 12 9 6"/>
            </svg>
          </button>
        </nav>

        <div class="timetable-container">
        <div class="grid-header">
          <div>Ti·∫øt / Th·ª©</div>
          <div>Th·ª© 2</div>
          <div>Th·ª© 3</div>
          <div>Th·ª© 4</div>
          <div>Th·ª© 5</div>
          <div>Th·ª© 6</div>
          <div>Th·ª© 7</div>
          <div>CN</div>
        </div>

        <div id="timetable-grid" class="grid-body"></div>
      </div>
      </div>

      <!-- Tab: Exams -->
      <div class="tab-content" id="tab-exams">
        <section class="exams-container">
          <div class="exams-header">
            <h3>L·ªãch Thi & Ki·ªÉm Tra</h3>
            <div class="exams-actions">
              <select id="exam-filter" class="filter-select">
                <option value="all">T·∫•t c·∫£</option>
                <option value="upcoming">S·∫Øp t·ªõi</option>
                <option value="completed">ƒê√£ thi</option>
              </select>
              <select id="exam-sort" class="filter-select">
                <option value="date">S·∫Øp x·∫øp theo ng√†y</option>
                <option value="course">S·∫Øp x·∫øp theo m√¥n</option>
              </select>
              <button id="btn-add-exam" class="btn-primary">+ Th√™m L·ªãch Thi</button>
            </div>
          </div>
          
          <div class="exams-stats">
            <div class="stat-card">
              <div class="stat-value" id="total-exams">0</div>
              <div class="stat-label">T·ªïng s·ªë</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="upcoming-exams">0</div>
              <div class="stat-label">S·∫Øp t·ªõi</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="this-week-exams">0</div>
              <div class="stat-label">Tu·∫ßn n√†y</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="completed-exams">0</div>
              <div class="stat-label">ƒê√£ thi</div>
            </div>
          </div>

          <div id="exams-list" class="exams-list"></div>
        </section>
      </div>

      <!-- Tab: Courses -->
      <div class="tab-content" id="tab-courses">
        <div class="courses-header">
          <h3>Danh S√°ch M√¥n H·ªçc Chi Ti·∫øt</h3>
          <div class="courses-actions">
            <div class="search-bar-container">
              <input
                type="text"
                id="search-input"
                class="search-input"
                placeholder="T√¨m ki·∫øm m√¥n h·ªçc..."
                autocomplete="off"
              />
              <div
                id="search-results"
                class="search-results"
                style="display: none"
              ></div>
            </div>
            <button id="btn-add-course" class="btn-primary">+ Th√™m M√¥n</button>
          </div>
        </div>
        <div class="table-wrapper">
          <table class="course-table">
            <thead>
              <tr>
                <th style="width: 50px">STT</th>
                <th style="text-align: left">M√¥n H·ªçc</th>
                <th>L·ªãch H·ªçc</th>
                <th>Ph√≤ng</th>
                <th>Gi·∫£ng Vi√™n</th>
                <th>Th·ªùi Gian (Tu·∫ßn)</th>
                <th style="width: 120px">H√†nh ƒê·ªông</th>
              </tr>
            </thead>
            <tbody id="course-list-body"></tbody>
          </table>
        </div>
      </section>
      </div>

      <!-- Tab: Assignments -->
      <div class="tab-content" id="tab-assignments">
        <section class="assignments-container">
          <div class="assignments-header">
            <h3>Qu·∫£n L√Ω B√†i T·∫≠p</h3>
            <div class="assignments-actions">
              <select id="assignment-filter" class="filter-select">
                <option value="all">T·∫•t c·∫£</option>
                <option value="active">ƒêang l√†m</option>
                <option value="completed">Ho√†n th√†nh</option>
                <option value="overdue">Qu√° h·∫°n</option>
              </select>
              <select id="assignment-sort" class="filter-select">
                <option value="deadline">S·∫Øp x·∫øp theo h·∫°n</option>
                <option value="course">S·∫Øp x·∫øp theo m√¥n</option>
                <option value="priority">S·∫Øp x·∫øp theo ƒë·ªô ∆∞u ti√™n</option>
              </select>
              <button id="btn-add-assignment" class="btn-primary">+ Th√™m B√†i T·∫≠p</button>
            </div>
          </div>
          
          <div class="assignments-stats">
            <div class="stat-card">
              <div class="stat-value" id="total-assignments">0</div>
              <div class="stat-label">T·ªïng s·ªë</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="active-assignments">0</div>
              <div class="stat-label">ƒêang l√†m</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="completed-assignments">0</div>
              <div class="stat-label">Ho√†n th√†nh</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="overdue-assignments">0</div>
              <div class="stat-label">Qu√° h·∫°n</div>
            </div>
          </div>

          <div id="assignments-list" class="assignments-list"></div>
        </section>
      </div>

      <!-- Tab: Attendance -->
      <div class="tab-content" id="tab-attendance">
        <section class="attendance-container">
          <div class="attendance-header">
            <h3>Theo D√µi ƒêi·ªÉm Danh</h3>
            <div class="attendance-actions">
              <select id="attendance-course-filter" class="filter-select">
                <option value="all">T·∫•t c·∫£ m√¥n</option>
              </select>
              <select id="attendance-week-filter" class="filter-select">
                <option value="current">Tu·∫ßn hi·ªán t·∫°i</option>
                <option value="all">T·∫•t c·∫£ tu·∫ßn</option>
              </select>
            </div>
          </div>
          
          <div class="attendance-stats">
            <div class="stat-card">
              <div class="stat-value" id="total-sessions">0</div>
              <div class="stat-label">T·ªïng bu·ªïi</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="attended-sessions">0</div>
              <div class="stat-label">ƒê√£ ƒëi</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="absent-sessions">0</div>
              <div class="stat-label">V·∫Øng</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="attendance-rate">0%</div>
              <div class="stat-label">T·ª∑ l·ªá ƒëi h·ªçc</div>
            </div>
          </div>

          <div class="attendance-course-list" id="attendance-course-list"></div>
        </section>
      </div>

      <!-- Tab: Notes -->
      <div class="tab-content" id="tab-notes">
        <!-- Notes Header with Actions -->
        <section class="notes-header-section">
          <div class="notes-header">
            <h3>üìù Ghi Ch√∫ Th√¥ng Minh</h3>
            <div class="notes-actions">
              <div class="notes-search-box">
                <input type="text" id="notes-search" placeholder="üîç T√¨m ki·∫øm ghi ch√∫..." class="notes-search-input">
              </div>
              <select id="notes-filter" class="filter-select">
                <option value="all">T·∫•t c·∫£</option>
                <option value="pinned">üìå ƒê√£ ghim</option>
                <option value="todos">‚úì Todo</option>
                <option value="normal">üìÑ Th∆∞·ªùng</option>
              </select>
              <button id="btn-add-note" class="btn-primary">+ Ghi Ch√∫ M·ªõi</button>
            </div>
          </div>
          
          <!-- Notes Stats -->
          <div class="notes-stats">
            <div class="stat-card">
              <div class="stat-value" id="total-notes-count">0</div>
              <div class="stat-label">T·ªïng ghi ch√∫</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="pinned-notes-count">0</div>
              <div class="stat-label">ƒê√£ ghim</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="todo-notes-count">0</div>
              <div class="stat-label">Todo lists</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="completed-todos-count">0</div>
              <div class="stat-label">ƒê√£ ho√†n th√†nh</div>
            </div>
          </div>
        </section>

        <!-- Notes Grid -->
        <section class="smart-notes-container">
          <div id="smart-notes-list" class="smart-notes-grid"></div>
          <div id="notes-empty-state" class="empty-state" style="display: none;">
            <div class="empty-icon">üìù</div>
            <h4>Ch∆∞a c√≥ ghi ch√∫ n√†o</h4>
            <p>T·∫°o ghi ch√∫ ƒë·∫ßu ti√™n ƒë·ªÉ b·∫Øt ƒë·∫ßu!</p>
            <button class="btn-primary" onclick="document.getElementById('btn-add-note').click()">+ T·∫°o Ghi Ch√∫</button>
          </div>
        </section>

        <!-- Course Notes Section (m√¥n t·ª± do) -->
        <section class="notes-container" style="margin-top: 30px;">
          <h3>M√¥n H·ªçc Ghi Ch√∫ (Kh√¥ng c√≥ l·ªãch)</h3>
          <div id="notes-list-2" class="notes-grid"></div>
        </section>
      </div>

      <!-- Tab: Settings -->
      <div class="tab-content" id="tab-settings">
        <div class="settings-container">
          <!-- Section 1: H·ªá Th·ªëng K·ª≥ H·ªçc -->
          <section class="settings-section">
            <h3 class="settings-title">H·ªá Th·ªëng K·ª≥ H·ªçc</h3>
            <div class="settings-grid">
              <div class="form-group">
                <label for="semester-start-date">Ng√†y b·∫Øt ƒë·∫ßu h·ªçc k·ª≥:</label>
                <input type="date" id="semester-start-date" />
              </div>
              <div class="form-group">
                <label for="semester-start-week">Tu·∫ßn b·∫Øt ƒë·∫ßu:</label>
                <input 
                  type="number" 
                  id="semester-start-week" 
                  min="1" 
                  max="52" 
                  placeholder="VD: 22"
                />
              </div>
            </div>
            <button id="btn-save-semester" class="btn-primary">
              L∆∞u C√†i ƒê·∫∑t
            </button>
          </section>

          <!-- Section 2: L·ªãch Ngh·ªâ -->
          <section class="settings-section">
            <h3 class="settings-title">L·ªãch Ngh·ªâ</h3>
            <div id="holiday-list-settings" class="holiday-list"></div>
            <button id="btn-config-holiday" class="btn-secondary">
              + Th√™m Ng√†y Ngh·ªâ
            </button>
          </section>

          <!-- Section 3: D·ªØ Li·ªáu -->
          <section class="settings-section">
            <h3 class="settings-title">Qu·∫£n L√Ω D·ªØ Li·ªáu</h3>
            <div class="settings-actions">
              <button id="btn-export-settings" class="btn-secondary">
                ‚Üì Export JSON
              </button>
              <button id="btn-import-settings" class="btn-secondary">
                ‚Üë Import JSON
              </button>
              <button id="btn-clear-data" class="btn-danger">
                √ó X√≥a To√†n B·ªô D·ªØ Li·ªáu
              </button>
            </div>
          </section>

          <!-- Section 4: Giao Di·ªán -->
          <section class="settings-section">
            <h3 class="settings-title">Giao Di·ªán</h3>
            <div class="theme-selector">
              <label>
                <input type="radio" name="theme" value="light" />
                <span class="theme-option">
                  <span class="theme-preview light-preview"></span>
                  <span>S√°ng</span>
                </span>
              </label>
              <label>
                <input type="radio" name="theme" value="dark" />
                <span class="theme-option">
                  <span class="theme-preview dark-preview"></span>
                  <span>T·ªëi</span>
                </span>
              </label>
            </div>
          </section>
        </div>
      </div>
    </main>

    <div id="sidebar-overlay" class="sidebar-overlay"></div>
    <aside id="input-sidebar" class="input-sidebar">
      <form>
        <h2 id="modal-title" class="sidebar-title">Th√™m M√¥n H·ªçc M·ªõi</h2>

        <input type="hidden" id="edit-course-id" />

        <div class="form-group">
          <label for="subject-name"
            >T√™n m√¥n h·ªçc <span style="color: red">*</span>:</label
          >
          <input
            type="text"
            id="subject-name"
            required
            placeholder="V√≠ d·ª•: L·∫≠p tr√¨nh Web"
          />
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px">
          <div class="form-group">
            <label for="day-select">Th·ª©:</label>
            <select id="day-select" required>
              <option value="2">Th·ª© 2</option>
              <option value="3">Th·ª© 3</option>
              <option value="4">Th·ª© 4</option>
              <option value="5">Th·ª© 5</option>
              <option value="6">Th·ª© 6</option>
              <option value="7">Th·ª© 7</option>
              <option value="8">Ch·ªß Nh·∫≠t</option>
              <option value="0" style="color: #e74c3c; font-weight: bold">
                M√¥n T·ª± Do / Ghi Ch√∫
              </option>
            </select>
          </div>
          <div class="form-group">
            <label for="room-name">Ph√≤ng h·ªçc:</label>
            <input type="text" id="room-name" placeholder="VD: 301-G2" />
          </div>
        </div>

        <div class="form-group">
          <label for="teacher-name">T√™n Gi·∫£ng Vi√™n:</label>
          <input type="text" id="teacher-name" placeholder="VD: Th·∫ßy An" />
        </div>

        <div class="form-group">
          <label for="course-color">M√†u s·∫Øc m√¥n h·ªçc:</label>
          <input type="color" id="course-color" value="#3b82f6" />
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px">
          <div class="form-group">
            <label for="start-period">Ti·∫øt b·∫Øt ƒë·∫ßu:</label>
            <input
              type="number"
              id="start-period"
              min="1"
              max="15"
              value="1"
              required
            />
          </div>
          <div class="form-group">
            <label for="period-count">S·ªë ti·∫øt:</label>
            <input
              type="number"
              id="period-count"
              min="1"
              max="5"
              value="3"
              required
            />
          </div>
        </div>

        <div class="optional-section">
          <p class="optional-section-title">
            T·ª± ƒë·ªông ch·ªçn tu·∫ßn theo ng√†y (T√πy ch·ªçn):
          </p>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px">
            <div class="form-group" style="margin-bottom: 0">
              <input type="date" id="start-date-picker" title="Ng√†y b·∫Øt ƒë·∫ßu" />
            </div>
            <div class="form-group" style="margin-bottom: 0">
              <input type="date" id="end-date-picker" title="Ng√†y k·∫øt th√∫c" />
            </div>
          </div>
        </div>

        <div class="form-group">
          <label class="week-selector-label">
            <span>Ch·ªçn tu·∫ßn h·ªçc:</span>
            <div>
              <button
                type="button"
                id="btn-select-even"
                class="btn-toggle-weeks small"
              >
                Tu·∫ßn Ch·∫µn
              </button>
              <button
                type="button"
                id="btn-select-odd"
                class="btn-toggle-weeks small"
              >
                Tu·∫ßn L·∫ª
              </button>
              <button
                type="button"
                id="btn-toggle-all"
                class="btn-toggle-weeks"
              >
                Ch·ªçn t·∫•t c·∫£
              </button>
            </div>
          </label>
          <div id="week-checkbox-container" class="week-grid-selector"></div>
          <input
            type="text"
            id="week-range"
            readonly
            placeholder="C√°c tu·∫ßn ƒë∆∞·ª£c ch·ªçn s·∫Ω hi·ªán ·ªü ƒë√¢y..."
            class="week-range-display"
          />
        </div>

        <div class="form-group">
          <label for="course-notes">Ghi ch√∫ m√¥n h·ªçc:</label>
          <textarea
            id="course-notes"
            rows="3"
            placeholder="Ghi ch√∫, t√†i li·ªáu tham kh·∫£o, link b√†i gi·∫£ng..."
          ></textarea>
        </div>

        <div class="sidebar-actions">
          <button
            id="btn-delete"
            type="button"
            class="btn-danger"
            style="display: none"
          >
            X√≥a
          </button>
          <div style="margin-left: auto">
            <button id="btn-cancel-sidebar" type="button" class="btn-secondary">
              H·ªßy
            </button>
            <button id="btn-save" type="button" class="btn-primary">
              L∆∞u L·∫°i
            </button>
          </div>
        </div>
      </form>
    </aside>

    <dialog id="holiday-modal">
      <form method="dialog">
        <h2
          style="
            border-bottom: 2px solid #e74c3c;
            padding-bottom: 10px;
            color: #e74c3c;
          "
        >
          Qu·∫£n L√Ω Ng√†y Ngh·ªâ
        </h2>
        <div
          style="
            background: #fff5f5;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
          "
        >
          <div class="form-group">
            <label>T√™n k·ª≥ ngh·ªâ:</label>
            <input
              type="text"
              id="holiday-name"
              placeholder="VD: T·∫øt Nguy√™n ƒê√°n"
            />
          </div>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px">
            <div class="form-group">
              <label>T·ª´:</label><input type="date" id="holiday-start" />
            </div>
            <div class="form-group">
              <label>ƒê·∫øn:</label><input type="date" id="holiday-end" />
            </div>
          </div>
          <button
            id="btn-add-holiday"
            type="button"
            class="btn-primary"
            style="background-color: #e74c3c; width: 100%; margin-top: 10px"
          >
            Th√™m
          </button>
        </div>
        <h3>Danh s√°ch ƒë√£ l∆∞u:</h3>
        <ul id="holiday-list" class="holiday-list-container"></ul>
        <div class="modal-actions">
          <button
            class="btn-secondary"
            onclick="this.closest('dialog').close()"
          >
            ƒê√≥ng
          </button>
        </div>
      </form>
    </dialog>

    <dialog id="settings-modal">
      <form method="dialog">
        <h2
          style="
            border-bottom: 2px solid var(--color-primary);
            padding-bottom: 10px;
          "
        >
          C·∫•u h√¨nh H·ªá th·ªëng
        </h2>
        <div style="padding: 15px; border-radius: 8px; margin-bottom: 20px">
          <div class="form-group">
            <label for="setting-start-date">Ng√†y b·∫Øt ƒë·∫ßu k·ª≥:</label>
            <input type="date" id="setting-start-date" required />
          </div>
          <div class="form-group">
            <label for="setting-start-week">Tu·∫ßn b·∫Øt ƒë·∫ßu:</label>
            <input
              type="number"
              id="setting-start-week"
              min="1"
              value="1"
              required
            />
          </div>
        </div>
        <div class="modal-actions">
          <button
            value="cancel"
            class="btn-secondary"
            type="button"
            onclick="this.closest('dialog').close()"
          >
            H·ªßy
          </button>
          <button id="btn-save-settings" value="default" class="btn-primary">
            L∆∞u c·∫•u h√¨nh
          </button>
        </div>
      </form>
    </dialog>

    <!-- Assignment Modal -->
    <dialog id="assignment-modal">
      <form method="dialog">
        <h2 style="border-bottom: 2px solid var(--color-primary); padding-bottom: var(--space-2); margin-bottom: var(--space-4);">
          <span id="assignment-modal-title">Th√™m B√†i T·∫≠p M·ªõi</span>
        </h2>
        <div class="assignment-form-content">
          <div class="form-group">
            <label for="assignment-course">M√¥n h·ªçc:</label>
            <select id="assignment-course" required>
              <option value="">-- Ch·ªçn m√¥n h·ªçc --</option>
            </select>
          </div>
          <div class="form-group">
            <label for="assignment-title">T√™n b√†i t·∫≠p:</label>
            <input type="text" id="assignment-title" placeholder="VD: B√†i t·∫≠p tu·∫ßn 3" required />
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="assignment-deadline">H·∫°n n·ªôp:</label>
              <input type="datetime-local" id="assignment-deadline" required />
            </div>
            <div class="form-group">
              <label for="assignment-priority">ƒê·ªô ∆∞u ti√™n:</label>
              <select id="assignment-priority">
                <option value="low">Th·∫•p</option>
                <option value="medium" selected>Trung b√¨nh</option>
                <option value="high">Cao</option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label for="assignment-description">M√¥ t·∫£:</label>
            <textarea id="assignment-description" rows="2" placeholder="N·ªôi dung chi ti·∫øt b√†i t·∫≠p..."></textarea>
          </div>
        </div>
        <div class="modal-actions">
          <button value="cancel" class="btn-secondary" type="button" onclick="this.closest('dialog').close()">
            H·ªßy
          </button>
          <button id="btn-save-assignment" value="default" class="btn-primary">
            L∆∞u B√†i T·∫≠p
          </button>
        </div>
      </form>
    </dialog>

    <!-- Exam Modal -->
    <dialog id="exam-modal">
      <form method="dialog">
        <h2 style="border-bottom: 2px solid var(--color-primary); padding-bottom: var(--space-2); margin-bottom: var(--space-4);">
          <span id="exam-modal-title">Th√™m L·ªãch Thi M·ªõi</span>
        </h2>
        <div class="exam-form-content">
          <div class="form-group">
            <label for="exam-course">M√¥n h·ªçc:</label>
            <select id="exam-course" required>
              <option value="">-- Ch·ªçn m√¥n h·ªçc --</option>
            </select>
          </div>
          <div class="form-group">
            <label for="exam-title">Lo·∫°i thi:</label>
            <input type="text" id="exam-title" placeholder="VD: Ki·ªÉm tra gi·ªØa k·ª≥, Thi cu·ªëi k·ª≥" required />
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="exam-date">Ng√†y thi:</label>
              <input type="datetime-local" id="exam-date" required />
            </div>
            <div class="form-group">
              <label for="exam-duration">Th·ªùi l∆∞·ª£ng (ph√∫t):</label>
              <input type="number" id="exam-duration" min="30" max="300" value="90" required />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="exam-room">Ph√≤ng thi:</label>
              <input type="text" id="exam-room" placeholder="VD: A101" />
            </div>
            <div class="form-group">
              <label for="exam-format">H√¨nh th·ª©c:</label>
              <select id="exam-format">
                <option value="written">T·ª± lu·∫≠n</option>
                <option value="test">Tr·∫Øc nghi·ªám</option>
                <option value="online">Tr·ª±c tuy·∫øn</option>
                <option value="practical">Th·ª±c h√†nh</option>
                <option value="other">Kh√°c</option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label for="exam-notes">Ghi ch√∫:</label>
            <textarea id="exam-notes" rows="2" placeholder="Ph·∫°m vi, t√†i li·ªáu ƒë∆∞·ª£c mang theo..."></textarea>
          </div>
        </div>
        <div class="modal-actions">
          <button value="cancel" class="btn-secondary" type="button" onclick="this.closest('dialog').close()">
            H·ªßy
          </button>
          <button id="btn-save-exam" value="default" class="btn-primary">
            L∆∞u L·ªãch Thi
          </button>
        </div>
      </form>
    </dialog>

    <!-- Smart Note Modal -->
    <dialog id="note-modal">
      <form method="dialog">
        <div class="note-modal-header">
          <h2 id="note-modal-title">üìù T·∫°o Ghi Ch√∫ M·ªõi</h2>
          <button type="button" id="btn-close-note-modal" class="btn-icon">‚úï</button>
        </div>
        
        <input type="hidden" id="note-id">
        
        <div class="note-form-content">
          <!-- Title -->
          <div class="form-group">
            <label for="note-title">Ti√™u ƒë·ªÅ:</label>
            <input type="text" id="note-title" placeholder="Nh·∫≠p ti√™u ƒë·ªÅ ghi ch√∫..." required>
          </div>

          <!-- Tags -->
          <div class="form-group">
            <label for="note-tags">Tags:</label>
            <input type="text" id="note-tags" placeholder="#work #study #important (ph√¢n c√°ch b·∫±ng d·∫•u c√°ch)">
            <small class="form-hint">V√≠ d·ª•: #deadline #important #review</small>
          </div>

          <!-- Color Label -->
          <div class="form-group">
            <label for="note-color">M√†u nh√£n:</label>
            <div class="color-picker-inline">
              <input type="color" id="note-color" value="#60a5fa">
              <div class="color-presets">
                <button type="button" class="color-preset" data-color="#ef4444" style="background: #ef4444;" title="ƒê·ªè"></button>
                <button type="button" class="color-preset" data-color="#f59e0b" style="background: #f59e0b;" title="Cam"></button>
                <button type="button" class="color-preset" data-color="#10b981" style="background: #10b981;" title="Xanh l√°"></button>
                <button type="button" class="color-preset" data-color="#60a5fa" style="background: #60a5fa;" title="Xanh d∆∞∆°ng"></button>
                <button type="button" class="color-preset" data-color="#8b5cf6" style="background: #8b5cf6;" title="T√≠m"></button>
                <button type="button" class="color-preset" data-color="#ec4899" style="background: #ec4899;" title="H·ªìng"></button>
              </div>
            </div>
          </div>

          <!-- Note Type -->
          <div class="form-group">
            <label>Lo·∫°i ghi ch√∫:</label>
            <div class="note-type-selector">
              <label class="radio-card">
                <input type="radio" name="note-type" value="normal" checked>
                <span class="radio-card-content">
                  <span class="radio-card-icon">üìÑ</span>
                  <span class="radio-card-label">Ghi ch√∫ th∆∞·ªùng</span>
                </span>
              </label>
              <label class="radio-card">
                <input type="radio" name="note-type" value="todo">
                <span class="radio-card-content">
                  <span class="radio-card-icon">‚úì</span>
                  <span class="radio-card-label">Todo List</span>
                </span>
              </label>
            </div>
          </div>

          <!-- Content Editor -->
          <div class="form-group">
            <div class="editor-toolbar">
              <label>N·ªôi dung:</label>
              <div class="editor-actions">
                <button type="button" class="btn-icon" id="btn-toggle-preview" title="Preview">üëÅÔ∏è</button>
                <button type="button" class="btn-icon" id="btn-format-bold" title="Bold (Ctrl+B)">B</button>
                <button type="button" class="btn-icon" id="btn-format-italic" title="Italic (Ctrl+I)">I</button>
                <button type="button" class="btn-icon" id="btn-format-strike" title="Strikethrough">SÃ∂</button>
                <button type="button" class="btn-icon" id="btn-insert-link" title="Insert Link">üîó</button>
                <button type="button" class="btn-icon" id="btn-insert-checkbox" title="Insert Checkbox">‚òê</button>
              </div>
            </div>
            <div class="editor-container">
              <textarea id="note-content" class="note-editor" placeholder="Nh·∫≠p n·ªôi dung...

H·ªó tr·ª£ Markdown:
**bold** *italic* ~~strikethrough~~
- Bullet list
[ ] Todo checkbox
[x] Completed todo
https://link.com (t·ª± ƒë·ªông link h√≥a)"></textarea>
              <div id="note-preview" class="note-preview" style="display: none;"></div>
            </div>
            <div class="editor-footer">
              <small id="note-char-count" class="form-hint">0 k√Ω t·ª±</small>
              <small class="form-hint">H·ªó tr·ª£ Markdown & Auto-link</small>
            </div>
          </div>

          <!-- Pin Option -->
          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="note-pinned">
              <span>üìå Ghim ghi ch√∫ n√†y l√™n ƒë·∫ßu</span>
            </label>
          </div>
        </div>

        <div class="modal-actions">
          <button type="button" id="btn-cancel-note" class="btn-secondary">H·ªßy</button>
          <button type="submit" id="btn-save-note" class="btn-primary">üíæ L∆∞u Ghi Ch√∫</button>
        </div>
      </form>
    </dialog>

    <template id="course-card-template">
      <article class="course-card">
        <button
          class="btn-favorite"
          data-course-id=""
          title="Th√™m v√†o y√™u th√≠ch"
        >
          ‚òÜ
        </button>
        <h3 class="course-name"></h3>
        <p class="course-room"></p>
      </article>
    </template>

    <dialog id="import-modal">
      <h2
        style="
          margin-bottom: 15px;
          border-bottom: 2px solid var(--color-primary);
          padding-bottom: 10px;
        "
      >
        N·∫°p D·ªØ Li·ªáu (Import JSON)
      </h2>
      <p
        style="
          margin-bottom: 10px;
          font-size: 0.9rem;
          color: var(--color-text-gray);
        "
      >
        D√°n n·ªôi dung file JSON ƒë√£ sao l∆∞u v√†o √¥ b√™n d∆∞·ªõi:
      </p>
      <textarea
        id="import-area"
        style="
          width: 100%;
          min-height: 250px;
          font-family: monospace;
          border: 1px solid var(--color-border);
          border-radius: var(--border-radius-default);
          padding: 10px;
        "
      ></textarea>
      <div class="modal-actions" style="margin-top: 15px">
        <button id="btn-cancel-import" class="btn-secondary">H·ªßy</button>
        <button id="btn-confirm-import" class="btn-primary">X√°c Nh·∫≠n</button>
      </div>
    </dialog>

    <div id="course-detail-tooltip" class="course-tooltip hidden">
      <div class="tooltip-header">
        <h4 id="detail-name"></h4>
      </div>
      <div class="tooltip-body">
        <div class="tooltip-row">
          <span class="tooltip-icon">#</span>
          <span id="detail-day"></span>
        </div>
        <div class="tooltip-row">
          <span class="tooltip-icon">#</span>
          <span id="detail-period"></span>
        </div>
        <div class="tooltip-row">
          <span class="tooltip-icon">#</span>
          <span id="detail-room"></span>
        </div>
        <div class="tooltip-row">
          <span class="tooltip-icon">#</span>
          <span id="detail-teacher"></span>
        </div>
        <div class="tooltip-row">
          <span class="tooltip-icon">#</span>
          <span id="detail-weeks"></span>
        </div>
        <div class="tooltip-row" id="detail-notes-row" style="display: none; flex-direction: column; align-items: flex-start;">
          <div style="display: flex; align-items: center; margin-bottom: 4px;">
            <span class="tooltip-icon">üìù</span>
            <strong style="font-size: 0.85rem;">Ghi ch√∫:</strong>
          </div>
          <div id="detail-notes" style="font-style: italic; color: #555; font-size: 0.9rem; line-height: 1.5; word-break: break-word; padding-left: 24px;"></div>
        </div>
      </div>
    </div>

    <script type="module" src="./js/app.js"></script>
  </body>
</html>
