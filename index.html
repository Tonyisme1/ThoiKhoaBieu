<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Smart University Timetable</title>
    <link rel="stylesheet" href="./css/variables.css" />
    <link rel="stylesheet" href="./css/main.css" />
    <link rel="stylesheet" href="./css/layout.css" />
    <link rel="stylesheet" href="./css/components.css" />
  </head>
  <body>
    <header class="app-header">
      <div class="header-top">
        <h1>üìÖ Th·ªùi Kh√≥a Bi·ªÉu</h1>
        <div class="action-buttons">
          <button id="btn-theme-toggle" class="btn-secondary" title="ƒê·ªïi giao di·ªán S√°ng/T·ªëi">
              <span class="theme-icon light">‚òÄÔ∏è</span>
              <span class="theme-icon dark">üåô</span>
          </button>
          <button
            id="btn-config"
            class="btn-secondary"
            title="C·∫•u h√¨nh ng√†y ngh·ªâ"
          >
            ‚öôÔ∏è Ng√†y Ngh·ªâ
          </button>
          <button id="btn-settings" class="btn-secondary" title="C·∫•u h√¨nh chung">
            ‚öôÔ∏è C·∫•u h√¨nh
          </button>
          <button id="btn-export" class="btn-secondary" title="Sao l∆∞u JSON">
            üì§ Export
          </button>
          <button id="btn-import" class="btn-secondary" title="N·∫°p JSON">
            üì• Import
          </button>
          <button id="btn-open-input" class="btn-primary">‚úèÔ∏è Th√™m M√¥n</button>
        </div>
      </div>

      <nav class="week-navigation">
        <button id="btn-prev-week" class="nav-arrow" aria-label="Tu·∫ßn tr∆∞·ªõc">
          ‚ùÆ
        </button>
        <div id="week-list" class="week-scroller"></div>
        <button id="btn-next-week" class="nav-arrow" aria-label="Tu·∫ßn sau">
          ‚ùØ
        </button>
      </nav>

      <div id="holiday-banner" class="holiday-note"></div>
    </header>

    <main>
      <div class="timetable-container">
        <div class="grid-header">
          <div>Ti·∫øt / Th·ª©</div>
          <div>Th·ª© 2</div>
          <div>Th·ª© 3</div>
          <div>Th·ª© 4</div>
          <div>Th·ª© 5</div>
          <div>Th·ª© 6</div>
          <div>Th·ª© 7</div>
          <div>CN</div>
        </div>

        <div id="timetable-grid" class="grid-body"></div>
      </div>

      <section class="notes-container">
        <h3>üìå Ghi Ch√∫ & M√¥n T·ª± Do</h3>
        <div id="notes-list" class="notes-grid"></div>
      </section>

      <section id="general-notes-section" class="notes-container">
        <h3>üìù Ghi Ch√∫ Chung</h3>
        <textarea id="general-notes-textarea" placeholder="Nh·∫≠p c√°c ghi ch√∫, l·ªùi nh·∫Øc, ho·∫∑c th√¥ng tin quan tr·ªçng kh√°c ·ªü ƒë√¢y..."></textarea>
        <button id="btn-save-notes" class="btn-primary" style="margin-top: 10px;">L∆∞u Ghi Ch√∫</button>
      </section>

      <section class="course-list-section">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
            <h3>üìã Danh S√°ch M√¥n H·ªçc Chi Ti·∫øt</h3>
            <input type="search" id="search-input" placeholder="üîç T√¨m ki·∫øm m√¥n h·ªçc..." style="padding: 8px; border: 1px solid var(--color-border); border-radius: var(--border-radius-button); width: 300px;">
        </div>
        <div class="table-wrapper">
          <table class="course-table">
            <thead>
              <tr>
                <th style="width: 50px">STT</th>
                <th style="text-align: left">M√¥n H·ªçc</th>
                <th>L·ªãch H·ªçc</th>
                <th>Ph√≤ng</th>
                <th>Gi·∫£ng Vi√™n</th>
                <th>Th·ªùi Gian (Tu·∫ßn)</th>
                <th style="width: 120px">H√†nh ƒê·ªông</th>
              </tr>
            </thead>
            <tbody id="course-list-body"></tbody>
          </table>
        </div>
      </section>
    </main>

    <div id="sidebar-overlay" class="sidebar-overlay"></div>
    <aside id="input-sidebar" class="input-sidebar">
      <form>
        <h2 id="modal-title" class="sidebar-title">Th√™m M√¥n H·ªçc M·ªõi</h2>

        <input type="hidden" id="edit-course-id" />

        <div class="form-group">
          <label for="subject-name">T√™n m√¥n h·ªçc <span style="color: red">*</span>:</label>
          <input type="text" id="subject-name" required placeholder="V√≠ d·ª•: L·∫≠p tr√¨nh Web" />
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px">
          <div class="form-group">
            <label for="day-select">Th·ª©:</label>
            <select id="day-select" required>
              <option value="2">Th·ª© 2</option>
              <option value="3">Th·ª© 3</option>
              <option value="4">Th·ª© 4</option>
              <option value="5">Th·ª© 5</option>
              <option value="6">Th·ª© 6</option>
              <option value="7">Th·ª© 7</option>
              <option value="8">Ch·ªß Nh·∫≠t</option>
              <option value="0" style="color: #e74c3c; font-weight: bold">üìå M√¥n T·ª± Do / Ghi Ch√∫</option>
            </select>
          </div>
          <div class="form-group">
            <label for="room-name">Ph√≤ng h·ªçc:</label>
            <input type="text" id="room-name" placeholder="VD: 301-G2" />
          </div>
        </div>
        
        <div class="form-group">
            <label for="teacher-name">T√™n Gi·∫£ng Vi√™n:</label>
            <input type="text" id="teacher-name" placeholder="VD: Th·∫ßy An" />
        </div>
        
        <div class="form-group">
            <label for="course-color">M√†u s·∫Øc m√¥n h·ªçc:</label>
            <input type="color" id="course-color" value="#3b82f6" />
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px">
          <div class="form-group">
            <label for="start-period">Ti·∫øt b·∫Øt ƒë·∫ßu:</label>
            <input type="number" id="start-period" min="1" max="15" value="1" required />
          </div>
          <div class="form-group">
            <label for="period-count">S·ªë ti·∫øt:</label>
            <input type="number" id="period-count" min="1" max="5" value="3" required />
          </div>
        </div>

        <div class="optional-section">
          <p class="optional-section-title">üìÖ T·ª± ƒë·ªông ch·ªçn tu·∫ßn theo ng√†y (T√πy ch·ªçn):</p>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px">
            <div class="form-group" style="margin-bottom: 0">
              <input type="date" id="start-date-picker" title="Ng√†y b·∫Øt ƒë·∫ßu" />
            </div>
            <div class="form-group" style="margin-bottom: 0">
              <input type="date" id="end-date-picker" title="Ng√†y k·∫øt th√∫c" />
            </div>
          </div>
        </div>

        <div class="form-group">
          <label class="week-selector-label">
            <span>üìÖ Ch·ªçn tu·∫ßn h·ªçc:</span>
            <div>
                <button type="button" id="btn-select-even" class="btn-toggle-weeks small">Tu·∫ßn Ch·∫µn</button>
                <button type="button" id="btn-select-odd" class="btn-toggle-weeks small">Tu·∫ßn L·∫ª</button>
                <button type="button" id="btn-toggle-all" class="btn-toggle-weeks">Ch·ªçn t·∫•t c·∫£</button>
            </div>
          </label>
          <div id="week-checkbox-container" class="week-grid-selector"></div>
          <input type="text" id="week-range" readonly placeholder="C√°c tu·∫ßn ƒë∆∞·ª£c ch·ªçn s·∫Ω hi·ªán ·ªü ƒë√¢y..." class="week-range-display" />
        </div>

        <div class="sidebar-actions">
          <button id="btn-delete" type="button" class="btn-danger" style="display: none">üóëÔ∏è X√≥a</button>
          <div style="margin-left: auto">
            <button id="btn-cancel-sidebar" type="button" class="btn-secondary">H·ªßy</button>
            <button id="btn-save" type="button" class="btn-primary">L∆∞u L·∫°i</button>
          </div>
        </div>
      </form>
    </aside>

    <dialog id="holiday-modal">
      <form method="dialog">
        <h2 style="border-bottom: 2px solid #e74c3c; padding-bottom: 10px; color: #e74c3c;">üéâ Qu·∫£n L√Ω Ng√†y Ngh·ªâ</h2>
        <div style="background: #fff5f5; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
          <div class="form-group">
            <label>T√™n k·ª≥ ngh·ªâ:</label>
            <input type="text" id="holiday-name" placeholder="VD: T·∫øt Nguy√™n ƒê√°n" />
          </div>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px">
            <div class="form-group">
              <label>T·ª´:</label><input type="date" id="holiday-start" />
            </div>
            <div class="form-group">
              <label>ƒê·∫øn:</label><input type="date" id="holiday-end" />
            </div>
          </div>
          <button id="btn-add-holiday" type="button" class="btn-primary" style="background-color: #e74c3c; width: 100%; margin-top: 10px">‚ûï Th√™m</button>
        </div>
        <h3>Danh s√°ch ƒë√£ l∆∞u:</h3>
        <ul id="holiday-list" class="holiday-list-container"></ul>
        <div class="modal-actions">
          <button class="btn-secondary" onclick="this.closest('dialog').close()">ƒê√≥ng</button>
        </div>
      </form>
    </dialog>

    <dialog id="settings-modal">
      <form method="dialog">
        <h2 style="border-bottom: 2px solid var(--color-primary); padding-bottom: 10px;">‚öôÔ∏è C·∫•u h√¨nh H·ªá th·ªëng</h2>
        <div style="padding: 15px; border-radius: 8px; margin-bottom: 20px">
          <div class="form-group">
            <label for="setting-start-date">Ng√†y b·∫Øt ƒë·∫ßu k·ª≥:</label>
            <input type="date" id="setting-start-date" required />
          </div>
          <div class="form-group">
            <label for="setting-start-week">Tu·∫ßn b·∫Øt ƒë·∫ßu:</label>
            <input type="number" id="setting-start-week" min="1" value="1" required />
          </div>
        </div>
        <div class="modal-actions">
          <button value="cancel" class="btn-secondary" type="button" onclick="this.closest('dialog').close()">H·ªßy</button>
          <button id="btn-save-settings" value="default" class="btn-primary">L∆∞u c·∫•u h√¨nh</button>
        </div>
      </form>
    </dialog>

    <template id="course-card-template">
      <article class="course-card">
        <h3 class="course-name"></h3>
        <p class="course-room"></p>
      </article>
    </template>

    <dialog id="import-modal">
        <h2 style="margin-bottom: 15px; border-bottom: 2px solid var(--color-primary); padding-bottom: 10px;">N·∫°p D·ªØ Li·ªáu (Import JSON)</h2>
        <p style="margin-bottom: 10px; font-size: 0.9rem; color: var(--color-text-gray);">D√°n n·ªôi dung file JSON ƒë√£ sao l∆∞u v√†o √¥ b√™n d∆∞·ªõi:</p>
        <textarea id="import-area" style="width: 100%; min-height: 250px; font-family: monospace; border: 1px solid var(--color-border); border-radius: var(--border-radius-default); padding: 10px;"></textarea>
        <div class="modal-actions" style="margin-top: 15px;">
            <button id="btn-cancel-import" class="btn-secondary">H·ªßy</button>
            <button id="btn-confirm-import" class="btn-primary">X√°c Nh·∫≠n</button>
        </div>
    </dialog>

    <script type="module" src="./js/app.js"></script>
  </body>
</html>
